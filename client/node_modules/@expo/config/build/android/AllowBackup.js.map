{"version":3,"file":"AllowBackup.js","sourceRoot":"","sources":["../../src/android/AllowBackup.ts"],"names":[],"mappings":";;AACA,yCAAyE;AAEzE,SAAgB,cAAc,CAAC,MAAmC;;IAChE,oBAAoB;IACpB,+DAA+D;IAC/D,mBAAO,MAAM,CAAC,OAAO,0CAAE,WAAW,mCAAI,IAAI,CAAC;AAC7C,CAAC;AAJD,wCAIC;AAEM,KAAK,UAAU,cAAc,CAClC,MAAmC,EACnC,gBAA0B;IAE1B,MAAM,WAAW,GAAG,cAAc,CAAC,MAAM,CAAC,CAAC;IAE3C,MAAM,eAAe,GAAG,6BAAkB,CAAC,gBAAgB,CAAC,CAAC;IAC7D,IAAI,eAAe,aAAf,eAAe,uBAAf,eAAe,CAAG,GAAG,GAAG;QAC1B,eAAe,CAAC,GAAG,CAAC,CAAC,qBAAqB,CAAC,GAAG,MAAM,CAAC,WAAW,CAAkB,CAAC;KACpF;IAED,OAAO,gBAAgB,CAAC;AAC1B,CAAC;AAZD,wCAYC;AAED,SAAgB,0BAA0B,CAAC,gBAA0B;IACnE,MAAM,eAAe,GAAG,6BAAkB,CAAC,gBAAgB,CAAC,CAAC;IAE7D,IAAI,eAAe,aAAf,eAAe,uBAAf,eAAe,CAAG,GAAG,GAAG;QAC1B,OAAO,eAAe,CAAC,GAAG,CAAC,CAAC,qBAAqB,CAAC,KAAK,MAAM,CAAC;KAC/D;IAED,OAAO,IAAI,CAAC;AACd,CAAC;AARD,gEAQC","sourcesContent":["import { ExpoConfig } from '../Config.types';\nimport { Document, getMainApplication, StringBoolean } from './Manifest';\n\nexport function getAllowBackup(config: Pick<ExpoConfig, 'android'>): boolean {\n  // Defaults to true.\n  // https://docs.expo.io/versions/latest/config/app/#allowbackup\n  return config.android?.allowBackup ?? true;\n}\n\nexport async function setAllowBackup(\n  config: Pick<ExpoConfig, 'android'>,\n  manifestDocument: Document\n) {\n  const allowBackup = getAllowBackup(config);\n\n  const mainApplication = getMainApplication(manifestDocument);\n  if (mainApplication?.['$']) {\n    mainApplication['$']['android:allowBackup'] = String(allowBackup) as StringBoolean;\n  }\n\n  return manifestDocument;\n}\n\nexport function getAllowBackupFromManifest(manifestDocument: Document): boolean | null {\n  const mainApplication = getMainApplication(manifestDocument);\n\n  if (mainApplication?.['$']) {\n    return mainApplication['$']['android:allowBackup'] === 'true';\n  }\n\n  return null;\n}\n"]}