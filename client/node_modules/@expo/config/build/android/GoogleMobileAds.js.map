{"version":3,"file":"GoogleMobileAds.js","sourceRoot":"","sources":["../../src/android/GoogleMobileAds.ts"],"names":[],"mappings":";;AACA,yCAA4E;AAE5E,SAAgB,uBAAuB,CAAC,MAAkB;;IACxD,yBAAO,MAAM,CAAC,OAAO,0CAAE,MAAM,0CAAE,oBAAoB,mCAAI,IAAI,CAAC;AAC9D,CAAC;AAFD,0DAEC;AAED,SAAgB,0BAA0B,CAAC,MAAkB;;IAC3D,yBAAO,MAAM,CAAC,OAAO,0CAAE,MAAM,0CAAE,uBAAuB,mCAAI,KAAK,CAAC;AAClE,CAAC;AAFD,gEAEC;AAEM,KAAK,UAAU,wBAAwB,CAAC,MAAkB,EAAE,gBAA0B;IAC3F,MAAM,KAAK,GAAG,uBAAuB,CAAC,MAAM,CAAC,CAAC;IAC9C,MAAM,QAAQ,GAAG,0BAA0B,CAAC,MAAM,CAAC,CAAC;IAEpD,IAAI,CAAC,KAAK,EAAE;QACV,OAAO,gBAAgB,CAAC;KACzB;IAED,IAAI,eAAe,GAAG,6BAAkB,CAAC,gBAAgB,CAAC,CAAC;IAC3D,IAAI,CAAC,eAAe,EAAE;QACpB,eAAe,GAAG,EAAE,CAAC,EAAE,EAAE,cAAc,EAAE,kBAAkB,EAAE,EAAE,CAAC;KACjE;IAED,qBAAqB;IACrB,IAAI,qBAAqB,CAAC;IAC1B,MAAM,gBAAgB,GAAG;QACvB,CAAC,EAAE;YACD,cAAc,EAAE,2CAA2C;YAC3D,eAAe,EAAE,KAAK;SACvB;KACF,CAAC;IACF,IAAI,eAAe,CAAC,WAAW,CAAC,EAAE;QAChC,qBAAqB,GAAG,eAAe,CAAC,WAAW,CAAC,CAAC,MAAM,CACzD,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,cAAc,CAAC,KAAK,2CAA2C,CACnF,CAAC;QACF,IAAI,qBAAqB,CAAC,MAAM,EAAE;YAChC,qBAAqB,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,eAAe,CAAC,GAAG,KAAK,CAAC;SACxD;aAAM;YACL,eAAe,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;SACrD;KACF;SAAM;QACL,eAAe,CAAC,WAAW,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;KACnD;IAED,sBAAsB;IACtB,IAAI,qBAAqB,CAAC;IAC1B,MAAM,gBAAgB,GAAqB;QACzC,CAAC,EAAE;YACD,cAAc,EAAE,uDAAuD;YACvE,eAAe,EAAE,MAAM,CAAC,CAAC,QAAQ,CAAC;SACnC;KACF,CAAC;IACF,IAAI,eAAe,CAAC,WAAW,CAAC,EAAE;QAChC,qBAAqB,GAAG,eAAe,CAAC,WAAW,CAAC,CAAC,MAAM,CACzD,CAAC,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,cAAc,CAAC,KAAK,uDAAuD,CAC/F,CAAC;QACF,IAAI,qBAAqB,CAAC,MAAM,EAAE;YAChC,qBAAqB,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,eAAe,CAAC,GAAG,MAAM,CAAC,CAAC,QAAQ,CAAC,CAAC;SACpE;aAAM;YACL,eAAe,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;SACrD;KACF;SAAM;QACL,eAAe,CAAC,WAAW,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;KACnD;IAED,OAAO,gBAAgB,CAAC;AAC1B,CAAC;AAxDD,4DAwDC","sourcesContent":["import { ExpoConfig } from '../Config.types';\nimport { Document, getMainApplication, ManifestMetaData } from './Manifest';\n\nexport function getGoogleMobileAdsAppId(config: ExpoConfig) {\n  return config.android?.config?.googleMobileAdsAppId ?? null;\n}\n\nexport function getGoogleMobileAdsAutoInit(config: ExpoConfig) {\n  return config.android?.config?.googleMobileAdsAutoInit ?? false;\n}\n\nexport async function setGoogleMobileAdsConfig(config: ExpoConfig, manifestDocument: Document) {\n  const appId = getGoogleMobileAdsAppId(config);\n  const autoInit = getGoogleMobileAdsAutoInit(config);\n\n  if (!appId) {\n    return manifestDocument;\n  }\n\n  let mainApplication = getMainApplication(manifestDocument);\n  if (!mainApplication) {\n    mainApplication = { $: { 'android:name': '.MainApplication' } };\n  }\n\n  // add application ID\n  let existingApplicationId;\n  const newApplicationId = {\n    $: {\n      'android:name': 'com.google.android.gms.ads.APPLICATION_ID',\n      'android:value': appId,\n    },\n  };\n  if (mainApplication['meta-data']) {\n    existingApplicationId = mainApplication['meta-data'].filter(\n      (e: any) => e['$']['android:name'] === 'com.google.android.gms.ads.APPLICATION_ID'\n    );\n    if (existingApplicationId.length) {\n      existingApplicationId[0]['$']['android:value'] = appId;\n    } else {\n      mainApplication['meta-data'].push(newApplicationId);\n    }\n  } else {\n    mainApplication['meta-data'] = [newApplicationId];\n  }\n\n  // add delay auto init\n  let existingDelayAutoInit;\n  const newDelayAutoInit: ManifestMetaData = {\n    $: {\n      'android:name': 'com.google.android.gms.ads.DELAY_APP_MEASUREMENT_INIT',\n      'android:value': String(!autoInit),\n    },\n  };\n  if (mainApplication['meta-data']) {\n    existingDelayAutoInit = mainApplication['meta-data'].filter(\n      (e: any) => e['$']['android:name'] === 'com.google.android.gms.ads.DELAY_APP_MEASUREMENT_INIT'\n    );\n    if (existingDelayAutoInit.length) {\n      existingDelayAutoInit[0]['$']['android:value'] = String(!autoInit);\n    } else {\n      mainApplication['meta-data'].push(newDelayAutoInit);\n    }\n  } else {\n    mainApplication['meta-data'] = [newDelayAutoInit];\n  }\n\n  return manifestDocument;\n}\n"]}