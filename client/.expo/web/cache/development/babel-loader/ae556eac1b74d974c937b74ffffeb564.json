{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/davidhardy/Coding/CodeworksCourse/Senior/Solo Project/RecoveryBox/client/containers/HistoryScreen.js\";\nimport React, { useEffect, useState, useCallback } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport HomeWelcome from \"../components/HomeWelcome\";\nimport _ from 'lodash';\nimport SuggestionItem from \"../components/SuggestionItem\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { DateTime } from 'luxon';\nimport colors from \"../styles/colors\";\nimport { MediumAppText, BoldAppText } from \"../styles/text\";\nimport ApiService from \"../ApiService\";\nimport HistoricalMoodItem from \"../components/historical/HistoricalMoodItem\";\nimport HistoricalSuggestionItem from \"../components/historical/HistoricalSuggestionItem\";\nimport HistoricalUnusedSuggestionItem from \"../components/historical/HistoricalUnusedSuggestionItem\";\nimport { useNavigation } from '@react-navigation/native';\n\nfunction HistoryScreen() {\n  var _this = this;\n\n  var navigation = useNavigation();\n  var selectedDate = useSelector(function (state) {\n    return state.helper.selectedDate;\n  });\n  var fullHistoricalInfo = useSelector(function (state) {\n    return state.historicalData;\n  });\n\n  var requiredInfo = _.filter(fullHistoricalInfo, function (el) {\n    return el.date === selectedDate;\n  });\n\n  var dispatch = useDispatch();\n  useEffect(function () {\n    if (requiredInfo.length) dispatch({\n      type: \"UPDATE_HISTORICAL_FEELING\",\n      payload: requiredInfo[0].feeling\n    });\n    if (requiredInfo.length) dispatch({\n      type: \"UPDATE_HISTORICAL_MEETINGS\",\n      payload: requiredInfo[0].meetings\n    });\n    if (requiredInfo.length) dispatch({\n      type: \"UPDATE_HISTORICAL_MOODS\",\n      payload: requiredInfo[0].moods.map(function (mood) {\n        return mood.charAt(0).toUpperCase() + mood.slice(1);\n      })\n    });\n    if (requiredInfo.length) dispatch({\n      type: \"UPDATE_HISTORICAL_SUGGESTIONS\",\n      payload: requiredInfo[0].suggestions\n    });\n    return function cleanup() {\n      dispatch({\n        type: \"UPDATE_HISTORICAL_FEELING\",\n        payload: 0\n      });\n      dispatch({\n        type: \"UPDATE_HISTORICAL_MEETINGS\",\n        payload: 0\n      });\n      dispatch({\n        type: \"UPDATE_HISTORICAL_MOODS\",\n        payload: []\n      });\n      dispatch({\n        type: \"UPDATE_HISTORICAL_SUGGESTIONS\",\n        payload: []\n      });\n    };\n  }, []);\n  var feeling = useSelector(function (state) {\n    return state.calendarHistoricalDay.feeling;\n  });\n  var meetings = useSelector(function (state) {\n    return state.calendarHistoricalDay.meetings;\n  });\n  var moodsArr = useSelector(function (state) {\n    return state.calendarHistoricalDay.moods;\n  });\n  var suggestionsArr = useSelector(function (state) {\n    return state.calendarHistoricalDay.suggestions;\n  });\n\n  function onMeetingsAdd() {\n    if (meetings < 10) dispatch({\n      type: \"INCREMENT_HISTORICAL_MEETINGS\"\n    });\n  }\n\n  function onMeetingsMinus() {\n    if (meetings > 0) dispatch({\n      type: \"DECREMENT_HISTORICAL_MEETINGS\"\n    });else return;\n  }\n\n  function onFeelingAdd() {\n    if (feeling < 10) {\n      dispatch({\n        type: \"INCREMENT_HISTORICAL_FEELING\"\n      });\n    } else return;\n  }\n\n  function onFeelingMinus() {\n    if (feeling > 0) dispatch({\n      type: \"DECREMENT_HISTORICAL_FEELING\"\n    });else return;\n  }\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      newMoodsArr = _useState2[0],\n      setNewMoodsArr = _useState2[1];\n\n  var fullSuggestionsList = useSelector(function (state) {\n    return state.settings.suggestionSettings.suggestionsList;\n  });\n  var unusedSuggestions = fullSuggestionsList.filter(function (el) {\n    return !suggestionsArr.includes(el);\n  });\n  var historicalInfo = useSelector(function (state) {\n    return state.calendarHistoricalDay;\n  });\n\n  function onMoodsRemove() {}\n\n  function onMoodsAdd() {\n    dispatch({\n      type: \"ADDTO_HISTORICAL_MOODS\",\n      payload: newMoodsArr\n    });\n  }\n\n  function onSuggestionRemove() {}\n\n  function onSuggestionAdd(name) {\n    dispatch({\n      type: \"ADDTO_HISTORICAL_SUGGESTIONS\",\n      payload: name\n    });\n  }\n\n  var userId = useSelector(function (state) {\n    return state.user.id;\n  });\n\n  function createHistoricalData() {\n    ApiService.postHistoricalData({\n      date: DateTime.fromMillis(selectedDate).toUTC().startOf('day').ts,\n      meetings: meetings,\n      feeling: feeling,\n      moods: JSON.stringify(newMoodsArr),\n      suggestions: JSON.stringify(suggestionsArr),\n      UserId: userId\n    });\n  }\n\n  function clickHandler() {\n    onMoodsAdd();\n    createHistoricalData();\n    dispatch({\n      type: \"UPDATE_HISTORICALDATA_WITH_HISTORICALINFO\",\n      payload: historicalInfo\n    });\n  }\n\n  return React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }\n  }, React.createElement(HomeWelcome, {\n    historicalDate: selectedDate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 9\n    }\n  }), requiredInfo.length ? React.createElement(React.Fragment, null) : React.createElement(View, {\n    style: styles.noData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 40\n    }\n  }, React.createElement(MediumAppText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }\n  }, \"You have no data for today.\")), React.createElement(ScrollView, {\n    style: styles.infoWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: styles.infoSubWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.textWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 11\n    }\n  }, React.createElement(MediumAppText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }\n  }, \"Meetings attended:\"), React.createElement(BoldAppText, {\n    style: {\n      marginTop: -10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }\n  }, meetings)), React.createElement(View, {\n    style: styles.iconWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 11\n    }\n  }, React.createElement(TouchableOpacity, {\n    style: styles.icon,\n    onPress: function onPress() {\n      return onMeetingsMinus();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 13\n    }\n  }, React.createElement(Image, {\n    source: require(\"../assets/remove.png\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 15\n    }\n  })), React.createElement(TouchableOpacity, {\n    style: styles.icon,\n    onPress: function onPress() {\n      return onMeetingsAdd();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 13\n    }\n  }, React.createElement(Image, {\n    source: require(\"../assets/add.png\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 15\n    }\n  })))), React.createElement(View, {\n    style: styles.infoSubWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.textWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 11\n    }\n  }, React.createElement(MediumAppText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 13\n    }\n  }, \"Feeling:\"), React.createElement(View, {\n    style: {\n      flexDirection: 'row'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 13\n    }\n  }, React.createElement(BoldAppText, {\n    style: {\n      marginTop: -10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 13\n    }\n  }, feeling), React.createElement(BoldAppText, {\n    style: {\n      marginTop: -3,\n      fontSize: 14\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 13\n    }\n  }, \" / 10\"))), React.createElement(View, {\n    style: styles.iconWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 11\n    }\n  }, React.createElement(TouchableOpacity, {\n    style: styles.icon,\n    onPress: function onPress() {\n      return onFeelingMinus();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 13\n    }\n  }, React.createElement(Image, {\n    source: require(\"../assets/remove.png\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 15\n    }\n  })), React.createElement(TouchableOpacity, {\n    style: styles.icon,\n    onPress: function onPress() {\n      return onFeelingAdd();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 13\n    }\n  }, React.createElement(Image, {\n    source: require(\"../assets/add.png\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 15\n    }\n  })))), React.createElement(View, {\n    style: {\n      flex: 1,\n      minHeight: 75\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 9\n    }\n  }, React.createElement(MediumAppText, {\n    style: {\n      marginBottom: 15\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 11\n    }\n  }, \"Moods:\"), moodsArr.map(function (mood) {\n    return React.createElement(HistoricalMoodItem, {\n      key: mood,\n      onMoodsRemove: onMoodsRemove,\n      mood: mood,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 15\n      }\n    });\n  }), React.createElement(TextInput, {\n    style: styles.moodsTextInput,\n    placeholder: \"Enter a mood\",\n    value: \"\",\n    onChangeText: function onChangeText(text) {\n      return setNewMoodsArr(text);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 11\n    }\n  })), React.createElement(View, {\n    style: {\n      flex: 1,\n      minHeight: 200\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.cog,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 11\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return navigation.navigate('ModifySuggestions');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 11\n    }\n  }, React.createElement(Image, {\n    style: styles.icons,\n    source: require(\"../assets/settings.png\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 13\n    }\n  }))), React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 11\n    }\n  }, React.createElement(MediumAppText, {\n    style: {\n      marginBottom: 15,\n      maxWidth: 200\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 13\n    }\n  }, \"Suggestions completed:\"), suggestionsArr.map(function (suggestion) {\n    return React.createElement(HistoricalSuggestionItem, {\n      key: suggestion,\n      onSuggestionRemove: onSuggestionRemove,\n      suggestion: suggestion,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 19\n      }\n    });\n  })), React.createElement(View, {\n    style: styles.unusedSuggestionsWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 11\n    }\n  }, unusedSuggestions.map(function (suggestion) {\n    return React.createElement(HistoricalUnusedSuggestionItem, {\n      key: suggestion,\n      name: suggestion,\n      onSuggestionAdd: onSuggestionAdd,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 19\n      }\n    });\n  })))), React.createElement(View, {\n    style: styles.wrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }\n  }, React.createElement(TouchableOpacity, {\n    style: styles.button,\n    onPress: function onPress() {\n      return clickHandler();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 9\n    }\n  }, React.createElement(BoldAppText, {\n    style: {\n      fontSize: 14,\n      color: colors.cosmicLatte,\n      marginBottom: 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 11\n    }\n  }, \"UPDATE YOUR DAY\"))));\n}\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.platinum\n  },\n  wrapper: {\n    alignItems: 'center',\n    marginTop: 5\n  },\n  button: {\n    width: '50%',\n    height: 50,\n    borderRadius: 5,\n    marginHorizontal: 20,\n    backgroundColor: colors.orange,\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginBottom: 10,\n    elevation: 10,\n    borderWidth: 2,\n    borderColor: 'white'\n  },\n  infoWrapper: {\n    flex: 1,\n    flexDirection: 'column',\n    borderRadius: 5,\n    backgroundColor: 'white',\n    elevation: 1,\n    marginTop: 1,\n    marginBottom: 10,\n    marginRight: 10,\n    marginLeft: 10,\n    paddingHorizontal: 10,\n    paddingVertical: 12\n  },\n  infoSubWrapper: {\n    width: '100%',\n    flexDirection: 'row',\n    alignContent: 'center'\n  },\n  icon: {\n    backgroundColor: colors.blue,\n    width: 30,\n    height: 30,\n    borderRadius: 50,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  textWrapper: {\n    width: '55%'\n  },\n  iconWrapper: {\n    alignContent: 'center',\n    width: '45%',\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    marginTop: 10\n  },\n  remove: {\n    height: 9,\n    width: 9\n  },\n  add: {\n    height: 9,\n    width: 9\n  },\n  removeIcon: {\n    backgroundColor: colors.lightGray,\n    opacity: 1,\n    width: 12,\n    height: 12,\n    borderRadius: 50,\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginTop: -15\n  },\n  moodsTextInput: {\n    position: 'absolute',\n    right: 20,\n    backgroundColor: 'transparent',\n    borderRadius: 5,\n    height: 40,\n    paddingLeft: 5,\n    marginTop: 5,\n    width: '35%',\n    fontSize: 10,\n    fontFamily: 'Montserrat_500Medium',\n    borderBottomWidth: 2,\n    borderBottomColor: colors.cosmicLatte\n  },\n  moodsTextInput1: {\n    position: 'absolute',\n    left: 0,\n    top: 10,\n    backgroundColor: 'transparent',\n    borderRadius: 5,\n    height: 40,\n    paddingLeft: 5,\n    marginTop: 5,\n    width: '35%',\n    fontSize: 10,\n    fontFamily: 'Montserrat_500Medium',\n    borderBottomWidth: 2,\n    borderBottomColor: colors.cosmicLatte\n  },\n  unusedSuggestionsWrapper: {\n    position: 'absolute',\n    right: 15,\n    marginTop: 25\n  },\n  noData: {\n    justifyContent: 'center',\n    borderRadius: 5,\n    backgroundColor: 'white',\n    elevation: 1,\n    marginTop: 1,\n    marginBottom: 10,\n    marginRight: 10,\n    marginLeft: 10,\n    paddingHorizontal: 10,\n    paddingVertical: 12\n  },\n  cog: {\n    position: 'absolute',\n    right: 5,\n    top: 0,\n    elevation: 5\n  },\n  icons: {\n    height: 15,\n    width: 15\n  }\n});\nexport default HistoryScreen;","map":{"version":3,"sources":["/Users/davidhardy/Coding/CodeworksCourse/Senior/Solo Project/RecoveryBox/client/containers/HistoryScreen.js"],"names":["React","useEffect","useState","useCallback","HomeWelcome","_","SuggestionItem","useDispatch","useSelector","DateTime","colors","MediumAppText","BoldAppText","ApiService","HistoricalMoodItem","HistoricalSuggestionItem","HistoricalUnusedSuggestionItem","useNavigation","HistoryScreen","navigation","selectedDate","state","helper","fullHistoricalInfo","historicalData","requiredInfo","filter","el","date","dispatch","length","type","payload","feeling","meetings","moods","map","mood","charAt","toUpperCase","slice","suggestions","cleanup","calendarHistoricalDay","moodsArr","suggestionsArr","onMeetingsAdd","onMeetingsMinus","onFeelingAdd","onFeelingMinus","newMoodsArr","setNewMoodsArr","fullSuggestionsList","settings","suggestionSettings","suggestionsList","unusedSuggestions","includes","historicalInfo","onMoodsRemove","onMoodsAdd","onSuggestionRemove","onSuggestionAdd","name","userId","user","id","createHistoricalData","postHistoricalData","fromMillis","toUTC","startOf","ts","JSON","stringify","UserId","clickHandler","styles","container","noData","infoWrapper","infoSubWrapper","textWrapper","marginTop","iconWrapper","icon","require","flexDirection","fontSize","flex","minHeight","marginBottom","moodsTextInput","text","cog","navigate","icons","maxWidth","suggestion","unusedSuggestionsWrapper","wrapper","button","color","cosmicLatte","StyleSheet","create","backgroundColor","platinum","alignItems","width","height","borderRadius","marginHorizontal","orange","justifyContent","elevation","borderWidth","borderColor","marginRight","marginLeft","paddingHorizontal","paddingVertical","alignContent","blue","remove","add","removeIcon","lightGray","opacity","position","right","paddingLeft","fontFamily","borderBottomWidth","borderBottomColor","moodsTextInput1","left","top"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\nimport { StyleSheet, View, Text, TouchableOpacity, Image, TextInput, ScrollView } from 'react-native';\nimport HomeWelcome from '../components/HomeWelcome'\nimport _ from 'lodash'\nimport SuggestionItem from '../components/SuggestionItem'\nimport {useDispatch, useSelector } from \"react-redux\";\nimport {DateTime} from 'luxon'\nimport colors from '../styles/colors'\nimport { MediumAppText, BoldAppText } from '../styles/text'\nimport ApiService from '../ApiService'\nimport HistoricalMoodItem from '../components/historical/HistoricalMoodItem'\nimport HistoricalSuggestionItem from '../components/historical/HistoricalSuggestionItem'\nimport HistoricalUnusedSuggestionItem from '../components/historical/HistoricalUnusedSuggestionItem'\nimport { useNavigation } from '@react-navigation/native';\n\n\nfunction HistoryScreen () {\n\n  //TODO buggy nd broken at the moment, needs to bt split into separate components and put into reducers\n  //TODO once the above is completed, need to update the current put request\n  const navigation = useNavigation();\n\n  const selectedDate = useSelector((state) => state.helper.selectedDate)\n  const fullHistoricalInfo = useSelector((state) => state.historicalData)\n  const requiredInfo = _.filter(fullHistoricalInfo, el => el.date === selectedDate)\n\n  const dispatch = useDispatch();\n\n  useEffect(()=>{\n    if (requiredInfo.length) dispatch({\n      type: \"UPDATE_HISTORICAL_FEELING\",\n      payload: requiredInfo[0].feeling\n    })\n    if (requiredInfo.length) dispatch({\n      type: \"UPDATE_HISTORICAL_MEETINGS\",\n      payload: requiredInfo[0].meetings\n    })\n    if (requiredInfo.length) dispatch({\n      type: \"UPDATE_HISTORICAL_MOODS\",\n      payload: requiredInfo[0].moods.map(mood => mood.charAt(0).toUpperCase() + mood.slice(1))\n    }) \n    if (requiredInfo.length) dispatch({\n      type: \"UPDATE_HISTORICAL_SUGGESTIONS\",\n      payload: requiredInfo[0].suggestions\n    })\n    return function cleanup () {\n      dispatch({\n        type: \"UPDATE_HISTORICAL_FEELING\",\n        payload: 0\n    })\n    dispatch({\n      type: \"UPDATE_HISTORICAL_MEETINGS\",\n      payload: 0\n    })\n    dispatch({\n      type: \"UPDATE_HISTORICAL_MOODS\",\n      payload: []\n    })\n    dispatch({\n      type: \"UPDATE_HISTORICAL_SUGGESTIONS\",\n      payload: []\n    })\n  }\n  },[])\n\n  const feeling = useSelector((state) => state.calendarHistoricalDay.feeling); \n  const meetings = useSelector((state) => state.calendarHistoricalDay.meetings);\n  const moodsArr = useSelector((state) => state.calendarHistoricalDay.moods);\n  const suggestionsArr = useSelector((state) => state.calendarHistoricalDay.suggestions); \n\n\n  function onMeetingsAdd () {\n    if (meetings<10)\n    dispatch({\n      type: \"INCREMENT_HISTORICAL_MEETINGS\"\n    })\n  }\n\n  function onMeetingsMinus () { \n    if (meetings>0) \n    dispatch({\n      type: \"DECREMENT_HISTORICAL_MEETINGS\"\n    })\n    else return\n  }\n\n  function onFeelingAdd () { \n    if (feeling<10) {\n      dispatch({\n        type: \"INCREMENT_HISTORICAL_FEELING\"\n      })\n    }\n    else return\n  }\n\n  function onFeelingMinus () { \n    if (feeling>0) \n    dispatch({\n      type: \"DECREMENT_HISTORICAL_FEELING\"\n    })\n    else return\n  }\n\n  const [newMoodsArr, setNewMoodsArr] = useState([])\n  const fullSuggestionsList = useSelector((state) => state.settings.suggestionSettings.suggestionsList);\n  const unusedSuggestions = fullSuggestionsList.filter(el => !suggestionsArr.includes(el))\n  const historicalInfo = useSelector((state) => state.calendarHistoricalDay);\n  function onMoodsRemove () { \n\n  }\n\n  function onMoodsAdd () { \n    dispatch({\n      type: \"ADDTO_HISTORICAL_MOODS\",\n      payload: newMoodsArr\n    })\n  }\n\n  function onSuggestionRemove () { \n    \n  }\n\n  function onSuggestionAdd (name) { \n    dispatch({\n      type: \"ADDTO_HISTORICAL_SUGGESTIONS\",\n      payload: name\n    })\n  }\n\n  const userId = useSelector((state) => state.user.id);\n\n  function createHistoricalData () {\n    ApiService.postHistoricalData({\n      date: DateTime.fromMillis(selectedDate).toUTC().startOf('day').ts,\n      meetings: meetings,\n      feeling: feeling,\n      moods: JSON.stringify(newMoodsArr),\n      suggestions: JSON.stringify(suggestionsArr),\n      UserId: userId,\n    })\n  }\n\n  function clickHandler () {\n    onMoodsAdd()\n    createHistoricalData()\n    dispatch({\n      type: \"UPDATE_HISTORICALDATA_WITH_HISTORICALINFO\",\n      payload: historicalInfo\n    })\n  }\n\n    return (\n      <View style={styles.container}>\n        <HomeWelcome historicalDate={selectedDate}/>\n        {requiredInfo.length ? <></> : <View style={styles.noData}>\n            <MediumAppText>You have no data for today.</MediumAppText>\n          </View>\n        }\n      <ScrollView style={styles.infoWrapper}>  \n        <View style={styles.infoSubWrapper}>\n          <View style={styles.textWrapper}>\n            <MediumAppText>Meetings attended:</MediumAppText>\n            <BoldAppText style={{marginTop: -10,}}>{meetings}</BoldAppText>\n          </View>\n          <View style={styles.iconWrapper}>\n            <TouchableOpacity style={styles.icon} onPress={()=>onMeetingsMinus()}>\n              <Image source={require('../assets/remove.png')}/>\n            </TouchableOpacity>\n            <TouchableOpacity style={styles.icon} onPress={()=>onMeetingsAdd()}>\n              <Image source={require('../assets/add.png')}/>\n            </TouchableOpacity>\n          </View>\n        </View>\n        <View style={styles.infoSubWrapper}>\n          <View style={styles.textWrapper}>\n            <MediumAppText>Feeling:</MediumAppText>\n            <View style={{flexDirection:'row'}}>\n            <BoldAppText style={{marginTop: -10,}}>{feeling}</BoldAppText>\n            <BoldAppText style={{marginTop: -3, fontSize:14}}> / 10</BoldAppText>\n            </View>\n          </View>\n          <View style={styles.iconWrapper}>\n            <TouchableOpacity style={styles.icon} onPress={()=>onFeelingMinus()}>\n              <Image source={require('../assets/remove.png')}/>\n            </TouchableOpacity>\n            <TouchableOpacity style={styles.icon} onPress={()=>onFeelingAdd()}>\n              <Image source={require('../assets/add.png')}/>\n            </TouchableOpacity>\n          </View>\n        </View>\n        <View style={{flex: 1, minHeight:75}}>\n          <MediumAppText style={{marginBottom:15}}>Moods:</MediumAppText>\n          {moodsArr.map(\n            mood => (\n              <HistoricalMoodItem key={mood} onMoodsRemove={onMoodsRemove} mood={mood}/>\n            )\n          )}\n          <TextInput\n              style={styles.moodsTextInput}\n              placeholder='Enter a mood'\n              value=''\n              onChangeText={text => setNewMoodsArr(text)}\n            />\n        </View>\n        <View style={{flex:1, minHeight: 200,}}>\n          <View style={styles.cog}>\n          <TouchableOpacity onPress={() =>  navigation.navigate('ModifySuggestions')}>\n            <Image style={styles.icons} source={require('../assets/settings.png')} />\n          </TouchableOpacity>\n          </View>\n          <View>\n            <MediumAppText style={{marginBottom:15, maxWidth:200,}}>Suggestions completed:</MediumAppText>\n              {suggestionsArr.map(\n                suggestion => (\n                  <HistoricalSuggestionItem key={suggestion} onSuggestionRemove={onSuggestionRemove} suggestion={suggestion}/>\n                )\n              )}\n          </View>\n          <View style={styles.unusedSuggestionsWrapper}>\n            {unusedSuggestions.map(\n                suggestion => (\n                  <HistoricalUnusedSuggestionItem key={suggestion} name={suggestion} onSuggestionAdd={onSuggestionAdd} />\n                )\n              )}\n          </View>\n        </View>\n      </ScrollView>\n      <View style={styles.wrapper}>\n        <TouchableOpacity style={styles.button} onPress={() => clickHandler()}>\n          <BoldAppText style={{fontSize: 14, color: colors.cosmicLatte, marginBottom:0,}}>UPDATE YOUR DAY</BoldAppText>\n        </TouchableOpacity>\n      </View>\n      </View>\n    )\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: colors.platinum,\n  },\n  wrapper: {\n    alignItems: 'center',\n    marginTop: 5,\n  },\n  button: {\n    width: '50%',\n    height: 50,\n    borderRadius: 5,\n    marginHorizontal: 20,\n    backgroundColor: colors.orange,\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginBottom: 10,\n    elevation: 10,\n    borderWidth: 2,\n    borderColor: 'white',\n  },\n  infoWrapper: {\n    flex: 1,\n    flexDirection: 'column',\n    borderRadius: 5,\n    backgroundColor: 'white',\n    elevation: 1,\n    marginTop: 1,\n    marginBottom: 10,\n    marginRight: 10,\n    marginLeft: 10,\n    paddingHorizontal: 10,\n    paddingVertical: 12,\n  },\n  infoSubWrapper: {\n    width:'100%',\n    flexDirection: 'row',\n    alignContent: 'center',\n  },\n  icon: {\n    backgroundColor: colors.blue,\n    width: 30,\n    height: 30,\n    borderRadius: 50,\n    alignItems: 'center',\n    justifyContent: 'center', \n  },\n  textWrapper: {\n    width: '55%'\n  },\n  iconWrapper: {\n    alignContent: 'center',\n    width: '45%',\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    marginTop: 10,\n  },\n  remove: {\n    height: 9,\n    width: 9,\n  },\n  add: {\n    height: 9,\n    width: 9,\n  },\n  removeIcon: {\n    backgroundColor: colors.lightGray,\n    opacity: 1,\n    width: 12,\n    height: 12,\n    borderRadius: 50,\n    alignItems: 'center',\n    justifyContent: 'center', \n    marginTop: -15,\n  },\n  moodsTextInput: {\n    position:'absolute',\n    right: 20,\n    backgroundColor: 'transparent',\n    borderRadius:5,\n    height:40,\n    paddingLeft: 5,\n    marginTop:5,\n    width: '35%',\n    fontSize: 10,\n    fontFamily: 'Montserrat_500Medium',\n    borderBottomWidth: 2,\n    borderBottomColor: colors.cosmicLatte,\n  },\n  moodsTextInput1: {\n    position:'absolute',\n    left: 0,\n    top: 10,\n    backgroundColor: 'transparent',\n    borderRadius:5,\n    height:40,\n    paddingLeft: 5,\n    marginTop:5,\n    width: '35%',\n    fontSize: 10,\n    fontFamily: 'Montserrat_500Medium',\n    borderBottomWidth: 2,\n    borderBottomColor: colors.cosmicLatte,\n  },\n  unusedSuggestionsWrapper: {\n    position:'absolute',\n    right: 15,\n    marginTop:25,\n  },\n  noData: {\n    justifyContent: 'center',\n    borderRadius: 5,\n    backgroundColor: 'white',\n    elevation: 1,\n    marginTop: 1,\n    marginBottom: 10,\n    marginRight: 10,\n    marginLeft: 10,\n    paddingHorizontal: 10,\n    paddingVertical: 12,\n  },\n  cog: {\n    position: 'absolute',\n    right: 5,\n    top: 0,\n    elevation: 5\n  },\n  icons: {\n    height: 15,\n    width: 15,\n  },\n});\n\n\n\nexport default HistoryScreen;\n\n\n\n    // let startingFeeling = 0; \n  // if (requiredInfo.length) startingFeeling = requiredInfo[0].feeling;\n  \n  // let startingMeetings = 0; \n  // if (requiredInfo.length) startingMeetings = requiredInfo[0].meetings;\n\n  // let startingMoods = []; \n  // if (requiredInfo.length) startingMoods = requiredInfo[0].moods.map(mood => mood.charAt(0).toUpperCase() + mood.slice(1));\n\n  // let startingSuggestions = []; \n  // if (requiredInfo.length) startingSuggestions = requiredInfo[0].suggestions;\n\n  // const [feeling, setFeeling] = useState(startingFeeling)\n  // const [meetings, setMeetings ] = useState(startingMeetings)\n  // const [moodsArr, setMoods] = useState(startingMoods)\n  // const [suggestionsArr, setSuggestions] = useState(startingSuggestions)\n  // function onMeetingsAdd () {\n  //   setMeetings(meetings+1) \n  // }\n\n  // function onMeetingsMinus () { \n  //   if (meetings>0) setMeetings(meetings-1) \n  //   else return\n  // }\n\n  // function onFeelingAdd () { \n  //   if (feeling<10) setFeeling(feeling+1)\n  //   else return\n  // }\n\n  // function onFeelingMinus () { \n  //   if (feeling>0) setFeeling(feeling-1)\n  //   else return\n  // }"]},"metadata":{},"sourceType":"module"}